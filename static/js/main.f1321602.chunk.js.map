{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Loader.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/ImagePopup.js","components/Register.js","components/Login.js","components/ProtectedRoute.js","utils/constants.js","utils/api.js","utils/auth.js","images/register_success.svg","images/register_fail.svg","components/InfoToolTip.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","location","useLocation","className","src","logo","alt","email","pathname","to","onClick","onSignOut","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","link","name","onCardClick","type","onCardLike","length","onDeleteClick","Loader","text","Main","useState","textLoading","setTextLoading","useEffect","cards","aria-label","avatar","onEditAvatar","onEditProfile","about","onAddPlace","map","Footer","year","Date","getFullYear","PopupWithForm","isOpen","action","noValidate","onSubmit","event","preventDefault","onClose","title","children","btnName","EditAvatarPopup","inputRef","createRef","current","value","onUpdateAvatar","ref","placeholder","required","EditProfilePopup","setName","description","setDescription","onUpdateUser","minLength","maxLength","onChange","target","AddPlacePopup","setLink","ConfirmDeletePopup","onDeletePlace","ImagePopup","Login","setEmail","password","setPassword","handleChange","onRegister","onLogin","ProtectedRoute","Component","component","isLoggedIn","authURL","api","tokenAuth","groupId","apiURL","this","_apiURL","_headers","authorization","fetch","headers","then","_handleApiResult","bind","cardData","method","body","JSON","stringify","cardId","userData","fnName","res","ok","json","Promise","reject","status","statusText","auth","jwt","InfoToolTip","success","registerSuccess","registerFail","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isInfoToolTipOpen","setIsInfoToolTipOpen","сardToDelete","setCardToDelete","selectedCard","setSelectedCard","setCurrentUser","setCards","isRegisterSuccess","setIsRegisterSuccess","history","useHistory","loadData","all","getUserInfo","getInitialCards","initialCards","catch","err","console","error","localStorage","getItem","validateUser","data","push","closeByEscapeBtn","key","closeAllPopups","document","removeEventListener","handleCardDelete","deleteCard","filter","c","log","Provider","removeItem","exact","path","addEventListener","toggleLikeCard","newCard","onCardDelete","userCredentials","registerUser","loginUser","token","setItem","editUserInfo","setUserAvatar","addCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f1321602.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.bbe2a6ea.svg\";","import React from 'react';\r\nimport {useLocation, Link} from 'react-router-dom';\r\nimport logo from '../images/logo.svg';\r\n\r\nexport default function Header(props){\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} alt=\"Логотип: Mesto Russia\" className=\"header__logo\" />\r\n      <div className=\"header__login\">\r\n        {props.email && <p className=\"header__login_email\">{props.email}</p>}\r\n        {\r\n          location.pathname === '/sign-in' &&\r\n          (<Link to='/sign-up' className=\"header__login_link\">Регистрация</Link>)\r\n        }\r\n        {\r\n          location.pathname === '/sign-up' &&\r\n          (<Link to='/sign-in' className=\"header__login_link\">Войти</Link>)\r\n        }\r\n        {\r\n          location.pathname === '/' &&\r\n          (<p to='/sign-out' className=\"header__login_link\" onClick={props.onSignOut}>Выйти</p>)\r\n        }\r\n      </div>\r\n    </header>\r\n  )\r\n}","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nexport default function Card(props){\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n  const cardDeleteButtonClassName = `element__delete-button ${isOwn ? '' : 'element__delete-button_disactive'}`;\r\n  const cardLikeButtonClassName = `element__caption-like ${isLiked ? 'element__caption-like_active' : ''}`;\r\n\r\n  const handleClick = () => { props.onCardClick(props.card) }\r\n  const handleLike = () => { props.onCardLike(props.card) }\r\n  const handleDelete = () => { props.onDeleteClick(props.card) }\r\n\r\n\r\n  return (\r\n    <figure className=\"element\">\r\n      <img src={props.card.link} alt={props.card.name} className=\"element__picture\" onClick={handleClick}/>\r\n      <figcaption className=\"element__caption\">\r\n        <h2 className=\"element__caption-text\">{props.card.name}</h2>\r\n        <div className='element__caption-like-group'>\r\n          <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLike} ></button>\r\n          <p className=\"element__caption-like-count\">{props.card.likes.length}</p>\r\n        </div>\r\n      </figcaption>\r\n      <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDelete}></button>\r\n    </figure>\r\n  )\r\n}","import React from 'react';\r\n\r\nexport default function Loader(props){\r\n  const text = props.text || 'Загрузка данных...';\r\n  return (<h1 className=\"content__title\">{text}</h1>)\r\n}","import React from 'react';\r\nimport Card from './Card';\r\nimport Loader from './Loader';\r\n\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nexport default function Main(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [textLoading, setTextLoading] = React.useState(\"Данные загружаются...\");\r\n\r\n  React.useEffect(() => {\r\n    if (!currentUser || !props.cards) {\r\n      setTextLoading(\"Данные загружаются...\");\r\n    }\r\n  }, [currentUser, props.cards]);\r\n\r\n  //у меня Shift + Alt + F правит только отступы!\r\n  return (\r\n    currentUser && props.cards ?\r\n      (<main className=\"content\">\r\n        <section className=\"profile\" aria-label=\"content\">\r\n          <div className=\"profile__avatar-container\">\r\n            <img src={currentUser.avatar} alt={`Аватар: ${currentUser.name}`} className=\"profile__avatar\" />\r\n            <button className=\"profile__edit-ava-button\" onClick={props.onEditAvatar}></button>\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__name-block\">\r\n              <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n              <button type=\"button\" className=\"button profile__edit-button\" onClick={props.onEditProfile}></button>\r\n            </div>\r\n            <p className=\"profile__job\">{currentUser.about}</p>\r\n          </div>\r\n          <button type=\"button\" className=\"button profile__add-button\" onClick={props.onAddPlace}></button>\r\n        </section>\r\n\r\n        <section className=\"elements\" aria-label=\"elements\">\r\n          {props.cards.map((card) => (\r\n            <Card card={card} key={card._id}\r\n              onCardClick={props.onCardClick}\r\n              onDeleteClick={props.onDeleteClick}\r\n              onCardLike={props.onCardLike} />\r\n          )\r\n          )}\r\n        </section>\r\n      </main>) :\r\n      (<Loader text={textLoading} />)\r\n  )\r\n}","export default function Footer(){\r\n  const year = new Date().getFullYear();\r\n  return (\r\n    <footer className=\"footer\">\r\n      &copy; {year} Mesto Russia\r\n    </footer>\r\n  )\r\n}","import React from 'react';\r\n\r\nexport default function PopupWithForm(props){\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    props.onSubmit();\r\n  }\r\n\r\n  return (\r\n    <div className={`popup popup_type_${props.name} ${props.isOpen && 'popup_opened'}`}>\r\n      <form action=\"/\" name={props.name} className=\"popup__container\" noValidate onSubmit={handleSubmit}>\r\n        <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\r\n        <fieldset className=\"popup__fieldset\">\r\n          {props.title && (<h2 className=\"popup__title\">{props.title}</h2>)}\r\n          {props.children}\r\n          {props.btnName && (<button type=\"submit\" className=\"popup__save-button\">{props.btnName}</button>)}\r\n        </fieldset>\r\n      </form>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nexport default function EditAvatarPopup(props) {\r\n  const inputRef = React.createRef();\r\n\r\n  React.useEffect(() => {\r\n    inputRef.current.value = '';\r\n  }, [inputRef]);\r\n\r\n  const handleSubmit = event => { props.onUpdateAvatar( {avatar: inputRef.current.value} ) } \r\n\r\n  return (\r\n    <PopupWithForm title='Обновить аватар' name='ava' btnName=\"Сохранить\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n      <input ref={inputRef} \r\n        type=\"url\"\r\n        name=\"profileAvatarLink\"\r\n        placeholder=\"Ссылка на аватар\"\r\n        className=\"popup__input popup__input_value_src\"\r\n        required />\r\n      <p className=\"popup__error profileAvatarLink-error\"></p>\r\n    </PopupWithForm>\r\n  );\r\n}","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nexport default function EditProfilePopup(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, props.isOpen]); \r\n\r\n  const handleSubmit = event => { props.onUpdateUser({ name, about: description }) }\r\n  const handleChangeName = event => { setName(event.target.value) }\r\n  const handleChangeDescription = event => { setDescription(event.target.value) }\r\n\r\n  return (\r\n    <PopupWithForm title='Редактировать профиль' name='edit' btnName=\"Сохранить\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n      <input type=\"text\"\r\n        name=\"profileName\"\r\n        placeholder=\"Имя\"\r\n        className=\"popup__input popup__input_value_name\"\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        required\r\n        value={name}\r\n        onChange={handleChangeName}/>\r\n      <p className=\"popup__error profileName-error\">&nbsp;</p>\r\n      <input type=\"text\"\r\n        name=\"profileJob\"\r\n        placeholder=\"Профессия\"\r\n        className=\"popup__input popup__input_value_job\" \r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        required\r\n        value={description}\r\n        onChange={handleChangeDescription}/>\r\n      <p className=\"popup__error profileJob-error\">&nbsp;</p>\r\n    </PopupWithForm>\r\n  );\r\n}","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nexport default function AddPlacePopup(props) {\r\n  const [name, setName] = React.useState('');\r\n  const [link, setLink] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName('');\r\n    setLink('');\r\n  }, [props.isOpen]); \r\n\r\n  const handleSubmit = event => { props.onAddPlace({ name, link }) }\r\n  const handleChangeName = event => { setName(event.target.value) }\r\n  const handleChangeLink = event => { setLink(event.target.value) }\r\n\r\n  return (\r\n    <PopupWithForm title='Новое место' name='add' btnName=\"Сохранить\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n      <input \r\n        type=\"text\"\r\n        name=\"name\"\r\n        placeholder=\"Название\"\r\n        className=\"popup__input popup__input_value_text\"\r\n        minLength=\"2\"\r\n        maxLength=\"30\"\r\n        required\r\n        value={name}\r\n        onChange={handleChangeName}/>\r\n      <p className=\"popup__error name-error\"></p>\r\n      <input\r\n        type=\"url\"\r\n        name=\"link\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        className=\"popup__input popup__input_value_src\"\r\n        required\r\n        value={link}\r\n        onChange={handleChangeLink}/>\r\n      <p className=\"popup__error link-error\"></p>\r\n    </PopupWithForm>\r\n  );\r\n}","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nexport default function ConfirmDeletePopup(props) {\r\n  const handleSubmit = event => { props.onDeletePlace(props.card) }\r\n\r\n  return (\r\n    <PopupWithForm title='Вы уверены?' name='confirm' btnName=\"Да\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit} />\r\n  );\r\n}","export default function ImagePopup(props){\r\n  return (\r\n    <div className={`popup popup_type_show ${props.card && 'popup_opened'}`}>\r\n      <figure className=\"popup__card\">\r\n        <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\r\n        <img src={props.card?.link} alt={props.card?.name} className=\"popup__picture\" />\r\n        <figcaption className=\"popup__caption\">{props.card?.name}</figcaption>\r\n      </figure>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nexport default function Login(props) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  const handleChange = event => {\r\n    if (event.target.name === 'email') setEmail(event.target.value);\r\n    if (event.target.name === 'password') setPassword(event.target.value)\r\n  }\r\n\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n    props.onRegister({ email, password });\r\n    setEmail('');\r\n    setPassword('');\r\n  }\r\n\r\n  return (\r\n    <section className=\"login-register\">\r\n      <h2 className=\"login-register__title\">Регистрация</h2>\r\n      <form action=\"/\" name={props.type} className=\"login-register__form\" noValidate onSubmit={handleSubmit}>\r\n        <input type=\"text\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          className=\"login-register__input\"\r\n          minLength=\"5\"\r\n          maxLength=\"40\"\r\n          required\r\n          value={email}\r\n          onChange={handleChange}/>\r\n        <input type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Пароль\"\r\n          className=\"login-register__input\" \r\n          minLength=\"5\"\r\n          maxLength=\"200\"\r\n          required\r\n          value={password}\r\n          onChange={handleChange}/>\r\n        <button type=\"submit\" className=\"login-register__submit-btn\">Зарегистрироваться</button>\r\n        <p className=\"login-register__already-title\">\r\n          Уже зарегистрированы ? <Link to=\"/sign-in\" className=\"login-register__already-login\">Войти</Link>\r\n        </p>\r\n      </form>\r\n    </section>\r\n  )\r\n}","import React from 'react';\r\n\r\nexport default function Login(props) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  const handleChange = event => {\r\n    if (event.target.name === 'email') setEmail(event.target.value);\r\n    if (event.target.name === 'password') setPassword(event.target.value)\r\n  }\r\n\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n    props.onLogin({ email, password });\r\n  }\r\n\r\n  return (\r\n    <section className=\"login-register\">\r\n      <h2 className=\"login-register__title\">Вход</h2>\r\n      <form action=\"/\" name={props.type} className=\"login-register__form\" noValidate onSubmit={handleSubmit}>\r\n        <input type=\"text\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          className=\"login-register__input\"\r\n          minLength=\"5\"\r\n          maxLength=\"40\"\r\n          required\r\n          value={email}\r\n          onChange={handleChange}/>\r\n        <input type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Пароль\"\r\n          className=\"login-register__input\" \r\n          minLength=\"5\"\r\n          maxLength=\"200\"\r\n          required\r\n          value={password}\r\n          onChange={handleChange}/>\r\n        <button type=\"submit\" className=\"login-register__submit-btn\">Войти</button>\r\n      </form>\r\n    </section>\r\n  )\r\n}","import React from 'react';\r\nimport {Redirect, Route} from 'react-router-dom';\r\n\r\nexport default function ProtectedRoute({component: Component, ...props}){\r\n  return (\r\n  <Route>\r\n    {props.isLoggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\"/>}\r\n  </Route>\r\n  )\r\n}","//api data\r\nexport const tokenAuth = '30b18b22-df4e-456d-bb26-16cda3a69c12';\r\nexport const groupId = 'cohort-21';\r\nexport const apiURL = 'https://mesto.nomoreparties.co/v1';\r\nexport const authURL = 'https://auth.nomoreparties.co';\r\n\r\nexport const signinURL = '/signin';\r\nexport const signupURL = '/signup';","import {tokenAuth, groupId, apiURL} from '../utils/constants';\r\n\r\nexport class Api{\r\n  constructor({tokenAuth, groupId, apiURL}){\r\n    this._apiURL = `${apiURL}/${groupId}`;\r\n    this._headers = { \r\n      authorization: tokenAuth,\r\n      'Content-Type': 'application/json'\r\n    };\r\n  }\r\n\r\n  getInitialCards(){\r\n    return fetch(`${this._apiURL}/cards`, {headers: this._headers})\r\n      .then(this._handleApiResult.bind(null, 'getInitialCards'))\r\n  }\r\n\r\n  addCard(cardData){\r\n    return fetch(`${this._apiURL}/cards`, {method: 'POST', headers: this._headers, body: JSON.stringify(cardData)})\r\n      .then(this._handleApiResult.bind(null, 'addCard'))\r\n  }\r\n  \r\n  toggleLikeCard(cardId, isLiked){\r\n    return fetch(`${this._apiURL}/cards/likes/${cardId}`, {method: isLiked ? 'DELETE' : 'PUT', headers: this._headers})\r\n      .then(this._handleApiResult.bind(null, 'likeCard'))\r\n  }\r\n\r\n  deleteCard(cardId){\r\n    return fetch(`${this._apiURL}/cards/${cardId}`, {method: 'DELETE', headers: this._headers,})\r\n      .then(this._handleApiResult.bind(null, 'deleteCard'))\r\n  }\r\n\r\n  editUserInfo(userData){\r\n    return fetch(`${this._apiURL}/users/me`, {method: 'PATCH', headers: this._headers, body: JSON.stringify(userData)})\r\n      .then(this._handleApiResult.bind(null, 'editUserInfo'))\r\n  } \r\n\r\n  getUserInfo(){\r\n    return fetch(`${this._apiURL}/users/me`, {headers: this._headers})\r\n      .then(this._handleApiResult.bind(null, 'getUserInfo'))\r\n  }\r\n\r\n  setUserAvatar(avatar){\r\n    return fetch(`${this._apiURL}/users/me/avatar`, {method: 'PATCH', headers: this._headers, body: JSON.stringify(avatar)})\r\n      .then(this._handleApiResult.bind(null, 'setUserAvatar'))\r\n  }\r\n\r\n  _handleApiResult(fnName, res){\r\n    return res.ok ? res.json() : Promise.reject(`Ошибка получения результата в ${fnName}: ${res.status} ${res.statusText}`);\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  tokenAuth: tokenAuth,\r\n  groupId: groupId,\r\n  apiURL: apiURL\r\n});\r\n\r\nexport default api;","import {authURL} from './constants';\r\n\r\nexport class Auth{\r\n  constructor(){\r\n    this._headers = {\r\n      'Content-Type': 'application/json'\r\n    };\r\n  }\r\n\r\n  registerUser(userData){\r\n    return fetch(`${authURL}/signup`, {method: 'POST', headers: this._headers, body: JSON.stringify(userData)})\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return res.json()\r\n        }\r\n        else {\r\n          return res.status === 400 ?\r\n            Promise.reject(`Ошибка в {registerUser}: не передано одно из полей`) :\r\n            Promise.reject(`Ошибка получения результата в {registerUser}: ${res.status} ${res.statusText}`);\r\n        }\r\n      })\r\n  }\r\n\r\n  loginUser(userData){\r\n    return fetch(`${authURL}/signin`, {method: 'POST', headers: this._headers, body: JSON.stringify(userData)})\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return res.json()\r\n        }\r\n        else {\r\n          if (res.status === 400) {\r\n            return Promise.reject(`Ошибка в {loginUser}: не передано одно из полей`)\r\n          }\r\n          else if (res.status === 401) {\r\n            return Promise.reject(`Ошибка в {loginUser}: пользователь с ${userData.email} не найден`)\r\n          }\r\n          else {\r\n            return Promise.reject(`Ошибка получения результата в {loginUser}: ${res.status} ${res.statusText}`);\r\n          }\r\n        }\r\n      })\r\n  }\r\n\r\n  validateUser(jwt){\r\n    return fetch(`${authURL}/users/me`, {method: 'GET', headers: {...this._headers, \"Authorization\": `Bearer ${jwt}`}})\r\n    .then(res => {\r\n      if (res.ok) {\r\n        return res.json()\r\n      }\r\n      else {\r\n        if (res.status === 400) {\r\n          return Promise.reject(`Ошибка в {validateUser}: Токен не передан или передан не в том формате`)\r\n        }\r\n        else if (res.status === 401) {\r\n          return Promise.reject(`Ошибка в {validateUser}: Переданный токен некорректен`)\r\n        }\r\n        else {\r\n          return Promise.reject(`Ошибка получения результата в {validateUser}: ${res.status} ${res.statusText}`);\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nconst auth = new Auth();\r\nexport default auth;","export default __webpack_public_path__ + \"static/media/register_success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/register_fail.df8eddf6.svg\";","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport registerSuccess from '../images/register_success.svg';\r\nimport registerFail from '../images/register_fail.svg';\r\n\r\nexport default function InfoToolTip(props){\r\n  return (\r\n    <PopupWithForm isOpen={props.isOpen} onClose={props.onClose}>\r\n      {\r\n        props.success ?\r\n          (<figure className=\"popup__tooltip\">\r\n            <img src={registerSuccess} alt=\"Регистрация: успех\"/>\r\n            <figcaption className=\"popup__title\">Вы успешно зарегистрировались</figcaption>\r\n          </figure>) :\r\n          (<figure className=\"popup__tooltip\">\r\n            <img src={registerFail} alt=\"Регистрация: ошибка\"/>\r\n            <figcaption className=\"popup__title\">Что-то пошло не так! Попробуйте ещё раз.</figcaption>\r\n          </figure>)\r\n      }\r\n    </PopupWithForm>\r\n  )\r\n}","import React from 'react';\nimport {Switch, Route, useHistory } from 'react-router-dom';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ConfirmDeletePopup from './ConfirmDeletePopup';\nimport ImagePopup from './ImagePopup';\nimport Register from './Register';\nimport Login from './Login';\nimport ProtectedRoute from './ProtectedRoute';\nimport api from '../utils/api';\nimport auth from '../utils/auth';\nimport InfoToolTip from './InfoToolTip';\n\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isInfoToolTipOpen, setIsInfoToolTipOpen] = React.useState(false);\n  const [сardToDelete, setCardToDelete] = React.useState(null);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState(null);\n  const [cards, setCards] = React.useState([])\n  const [email, setEmail] = React.useState('');\n  const [isRegisterSuccess, setIsRegisterSuccess] = React.useState(false);\n\n  const history = useHistory();\n\n  const loadData = () => {\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\n      .then(([userData, initialCards]) => {\n        setCurrentUser(userData);\n        setCards(initialCards)\n      })\n      .catch(err => console.error('Ошибка: ' + err))\n  }\n\n  React.useEffect(() => {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt){\n      auth.validateUser(jwt)\n        .then(res => {\n          if (res.data.email) {\n            setEmail(res.data.email);\n            history.push(\"/\");\n            loadData();\n          }\n        })\n        .catch(err => console.error('Ошибка: ' + err))\n    }\n  }, [history]);\n\n  //close on Escape button\n  const closeByEscapeBtn = event => {\n    if (event && event.key === 'Escape') {\n      closeAllPopups();\n    }\n  }\n\n  const handleEditAvatarClick = () => {\n    document.addEventListener('keydown', closeByEscapeBtn);\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  const handleEditProfileClick = () => {\n    document.addEventListener('keydown', closeByEscapeBtn);\n    setIsEditProfilePopupOpen(true);\n  }\n\n  const handleAddPlaceClick = () => {\n    document.addEventListener('keydown', closeByEscapeBtn);\n    setIsAddPlacePopupOpen(true);\n  }\n\n  const handleDeleteClick = (card) => {\n    document.addEventListener('keydown', closeByEscapeBtn);\n    setCardToDelete(card);\n  }\n\n  const handleCardClick = (card) => {\n    document.addEventListener('keydown', closeByEscapeBtn);\n    setSelectedCard(card);\n  }\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setCardToDelete(null);\n    setSelectedCard(null);\n    document.removeEventListener('keydown', closeByEscapeBtn);\n  }\n\n  const handleUpdateUser = ({name, about}) => {\n    api.editUserInfo({name, about})\n      .then(userData => {setCurrentUser(userData)})\n      .then(closeAllPopups)\n      .catch(err => console.log('Ошибка: ' + err))\n  }\n\n  const handleUpdateAvatar = avatar => {\n    api.setUserAvatar( avatar )\n      .then(userData => {setCurrentUser(userData)})\n      .then(closeAllPopups)\n      .catch(err => console.log('Ошибка: ' + err))\n  }\n\n  const handleCardLike = card => {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    \n    api.toggleLikeCard(card._id, isLiked)\n      .then(newCard => { setCards(cards => cards.map(c => c._id === card._id ? newCard : c)) })\n      .catch(err => console.log('Ошибка: ' + err))\n  }\n\n  const handleCardDelete = () => {\n    const card = сardToDelete;\n    api.deleteCard(card._id)\n      .then(() => { setCards(cards => cards.filter(c => c._id !== card._id)) })\n      .then(closeAllPopups)\n      .catch(err => console.log('Ошибка: ' + err))\n  }\n\n  const handleAddPlaceSubmit = card => {\n    api.addCard(card)\n      .then(newCard => {setCards([newCard, ...cards])})\n      .then(closeAllPopups)\n      .catch(err => console.log('Ошибка: ' + err))\n  }\n\n  const handleRegister = (userCredentials) => {\n    auth.registerUser(userCredentials)\n      .then(res => {\n        if(res.data.email) {\n          setIsRegisterSuccess(true)\n          history.push('/sign-in');\n          setIsInfoToolTipOpen(true);\n        }\n      })\n      .catch(err => {\n        console.log('Ошибка: ' + err)\n        setIsRegisterSuccess(false)\n        setIsInfoToolTipOpen(true);\n      })\n  }\n\n  const handleLogin = (userCredentials) => {\n    auth.loginUser(userCredentials)\n      .then(res => {\n        const jwt = res.token;\n        if (jwt){\n          setEmail(userCredentials.email);\n          localStorage.setItem('jwt', jwt);\n          history.push(\"/\");\n          loadData();\n        }\n      })\n      .catch(err => console.error('Ошибка: ' + err))\n  }\n\n  const handleSignOut = () => {\n    setEmail('');\n    localStorage.removeItem('jwt');\n    history.push('/sign-in');\n  }\n\n  const handleCloseInfoToolTip = () => { setIsInfoToolTipOpen(false) }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header email={email} onSignOut={handleSignOut}/>\n\n      <Switch>\n        <ProtectedRoute exact path=\"/\"\n          component={Main}\n          cards={cards}\n          isLoggedIn={email ? true : false}\n          onEditProfile={handleEditProfileClick} \n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onCardClick={handleCardClick}\n          onDeleteClick={handleDeleteClick}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}/>\n\n        <Route path=\"/sign-up\">\n          <Register onRegister={handleRegister}/>\n        </Route>\n\n        <Route path=\"/sign-in\">\n          <Login onLogin={handleLogin}/>\n        </Route>\n\n        <ProtectedRoute path=\"*\" />\n      </Switch>\n\n      <Footer />\n\n      {currentUser && cards &&\n        (<>\n          <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n          <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n          <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit}/>\n          <ConfirmDeletePopup isOpen={сardToDelete ? true : false} onClose={closeAllPopups} onDeletePlace={handleCardDelete}/>\n        </>)\n      }\n\n      <InfoToolTip isOpen={isInfoToolTipOpen} onClose={handleCloseInfoToolTip} success={isRegisterSuccess ? true : false} />\n\n      <ImagePopup card={selectedCard} onClose={closeAllPopups}/>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter} from 'react-router-dom';\n\nReactDOM.render((\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>    \n  </React.StrictMode>),\n  document.getElementById('root')\n);\nreportWebVitals();\n"],"sourceRoot":""}